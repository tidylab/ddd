<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add a Value Object to a Domain — add_value_object • R Domain-driven Design</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Add a Value Object to a Domain — add_value_object" />
<meta property="og:description" content="Value Object" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">R Domain-driven Design</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/articles/ddd.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tidylab/ddd/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add a Value Object to a Domain</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidylab/ddd/blob/master/R/ddd-add_value_object.R'><code>R/ddd-add_value_object.R</code></a></small>
    <div class="hidden name"><code>add_value_object.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Value Object</p>
    </div>

    <pre class="usage"><span class='fu'>add_value_object</span><span class='op'>(</span><span class='va'>name</span>, domain <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p>(<code>character</code>) <code>Value Object</code> name.</p></td>
    </tr>
    <tr>
      <th>domain</th>
      <td><p>(<code>character</code>) <code>Value Object</code> domain name.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>What is a Value Object?</h3>


<p>A <em><strong>Value Object</strong></em> is a function that receives input, applies some
transformations, and outputs the results in some data sturicture such as
a <code>vector</code>, a <code>list</code> or a <code>data.frame</code>.
<div class="alert alert-info" <strong="">
In R, a good practice is to set the Value Object to return a `data.frame` at its
output. This is because often the Value Object is called during data
wrangling operations.
</div></p>

<p>A light example of a <strong>Value Object</strong> is one that receives a character
vector, applies the <code>identity</code> function, and organises the character
vector in a <code>data.frame</code>.<div class="r"></p><pre><span class='va'>Alphabet</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>letters</span> <span class='op'>=</span> <span class='va'>LETTERS</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>letters</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Value Object type check</span>
  <span class='va'>letters</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='va'>letters</span><span class='op'>)</span>     <span class='co'># Value Object transformation</span>
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>letter <span class='op'>=</span> <span class='va'>letters</span><span class='op'>)</span>     <span class='co'># Value Object return object</span>
<span class='op'>}</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>Alphabet</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'>#&gt;   letter</span>
<span class='co'>#&gt; 1      A</span>
<span class='co'>#&gt; 2      B</span>
<span class='co'>#&gt; 3      C</span>
<span class='co'>#&gt; 4      D</span>
<span class='co'>#&gt; 5      E</span>
<span class='co'>#&gt; 6      F</span>
</pre><p></div></p>
<p>In the context of DDD, a <em><strong>Value Object</strong></em> models a domain concept. A
<strong>Value Object</strong> is an object that is identified only by its data and
doesn’t have a long-lived identity.</p>
<p>For example, think about the diners, i.e. customers, of a Pizzeria.
Associating an order and a customer requires ephemeral customer
identity. The customer name matters. It is used to identify for whom a
particular Pizza was made for. The names Hilary and Bill are not equal.
However, once the customer leaves the Pizzeria, the customer’s existence
dissipates. On the other hand, if the customer is enrolled in a
restaurant loyalty program, then its unique identifier on the system is
both essential and long-lived.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>What does <code>add_value_object</code> do?</h3>


<p>Given the <strong>Value Object</strong> name &lt;Customer&gt;, and its sub-domain name
&lt;pizza ordering&gt;,</p>
<p>When <code>add_value_object</code> is called<div class="r"></p><pre><span class='fu'>add_value_object</span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>"Customer"</span>, domain <span class='op'>=</span> <span class='st'>"pizza ordering"</span><span class='op'>)</span>
</pre><p></div></p>
<p>Then the function:</p><ul>
<li><p>Creates a <strong>Value Object</strong> boilerplate with several input arguments;</p></li>
<li><p>Places the file at <code>R/pizza_ordering-value-Customer.R</code>; and</p></li>
<li><p>Opens the file (only in interactive mode).</p></li>
</ul>


<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>What are the main components of a Value Object?</h3>


<p>The boilerplate code produced by <code>add_value_object</code> looks likes this:<div class="r"></p><pre><span class='co'>#' @title Customer Value Object</span>
<span class='co'>#' @return (`data.frame`)</span>
<span class='co'>#' @export</span>
<span class='co'>#' @family Pizza Ordering</span>
<span class='co'>#' @keywords internal</span>
<span class='co'>#' @noRd</span>
<span class='va'>Customer</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span>
    <span class='va'>size</span> <span class='op'>=</span> <span class='cn'>NA_character_</span>,
    <span class='va'>slices</span> <span class='op'>=</span> <span class='fl'>4L</span>,
    <span class='va'>toppings</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
    <span class='va'>takeaway</span> <span class='op'>=</span> <span class='cn'>NA</span>
<span class='op'>)</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>size</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/integer.html'>is.integer</a></span><span class='op'>(</span><span class='va'>slices</span><span class='op'>)</span>, <span class='va'>slices</span> <span class='op'>&gt;</span> <span class='fl'>0</span>, <span class='va'>slices</span> <span class='op'>&lt;=</span> <span class='fl'>8</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>is.list</a></span><span class='op'>(</span><span class='va'>toppings</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/logical.html'>is.logical</a></span><span class='op'>(</span><span class='va'>takeaway</span><span class='op'>)</span><span class='op'>)</span>

    <span class='fu'>tibble</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>
        size <span class='op'>=</span> <span class='va'>size</span>,
        slices <span class='op'>=</span> <span class='va'>slices</span>,
        toppings <span class='op'>=</span> <span class='va'>toppings</span>,
        takeaway <span class='op'>=</span> <span class='va'>takeaway</span>
    <span class='op'>)</span>
<span class='op'>}</span>
</pre><p></div></p>
<p>The boilerplate code includes three key activities covered by any
<strong>Value Object</strong>:</p><ul>
<li><p>Assigning default values to input argument values, such as different
types of NA.</p></li>
<li><p>Validating the type and value range (if applicable) of the input
arguments; and</p></li>
<li><p>Organizing the input arguments in a data structure, such as a
<code>data.frame</code>.</p></li>
</ul>

<p>In addition, the <strong>Value Object</strong> include transformations on the input
arguments before enframing them in a data structure. Common
transformations include: <code><a href='https://rdrr.io/r/base/serialize.html'>base::serialize</a></code>, <code><a href='https://rdrr.io/pkg/jsonlite/man/fromJSON.html'>jsonlite::toJSON</a></code>,
<code>tidyr::unite</code>, and <code><a href='https://rdrr.io/pkg/snakecase/man/caseconverter.html'>snakecase::to_title_case</a></code> to name a few.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Why should I use Value Objects in my design?</h3>


<p>The simplest way to implement a <strong>Value Object</strong> in R is with a function
that returns a data.frame row. Compare the following two patterns for
creating a data.frame that holds a Customer data.</p>
<p>First, using the <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble::tibble</a></code> function directly for constructing the
Customer<div class="r"></p><pre><span class='va'>customer</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>given <span class='op'>=</span> <span class='st'>"Bilbo"</span>, family <span class='op'>=</span> <span class='st'>"Baggins"</span><span class='op'>)</span>
</pre><p></div></p>
<p>Second, using a <strong>Value Object</strong> as a surrogate for constructing the
Customer<div class="r"></p><pre><span class='va'>Customer</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>given</span> <span class='op'>=</span> <span class='cn'>NA_character_</span>, <span class='va'>family</span> <span class='op'>=</span> <span class='cn'>NA_character_</span><span class='op'>)</span>
<span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>given</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>family</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'>tibble</span><span class='op'>(</span>given <span class='op'>=</span> <span class='va'>given</span>, family <span class='op'>=</span> <span class='va'>family</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>customer</span> <span class='op'>&lt;-</span> <span class='fu'>Customer</span><span class='op'>(</span>given <span class='op'>=</span> <span class='st'>"Bilbo"</span>, family <span class='op'>=</span> <span class='st'>"Baggins"</span><span class='op'>)</span>
</pre><p></div></p>
<p>Both patterns return identical objects, equal in content and structure
i.e. column names and classes.</p>
<p>Why would one prefer using a <strong>Value Object</strong> over the direct
alternative? There are three apparent qualities offered by the <strong>Value
Object</strong> pattern which are not offered by the alternative:</p><ul>
<li><p>Safety. Each input argument belongs to a certain type. This is
guaranteed by type checking at the beginning of the function.</p></li>
<li><p>NULL <strong>Value Object</strong>. Calling the <strong>Value Object</strong> with no input
arguments returns the structure of the <code>tibble</code> with default
content, such as <code>NULL</code>, <code>NA</code>, or actual values.</p></li>
<li><p>Default values for missing input arguments. In this manner, the
<strong>Value Object</strong> has a well-defined behaviour for a customer without
a last name, such as Madonna and Bono.</p></li>
</ul>

<p>There are more subtle qualities offered by a <strong>Value Object</strong> over
direct implementation. First, it allows you to capture new knowledge
about the domain. Say, you have discovered that the Pizzeria makes
deliveries. In this case, the Customer details need to include an
address and a phone number. With a <strong>Value Object</strong>, you can rewrite the
Customer concept as:<div class="r"></p><pre><span class='va'>Customer</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>given</span> <span class='op'>=</span> <span class='cn'>NA_character_</span>, <span class='va'>family</span> <span class='op'>=</span> <span class='cn'>NA_character_</span>, 
                     <span class='va'>phone</span> <span class='op'>=</span> <span class='cn'>NA_integer_</span>, <span class='va'>address</span> <span class='op'>=</span> <span class='cn'>NA_character_</span><span class='op'>)</span>
<span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>given</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>family</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/integer.html'>is.integer</a></span><span class='op'>(</span><span class='va'>phone</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>address</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'>tibble</span><span class='op'>(</span>given <span class='op'>=</span> <span class='va'>given</span>, family <span class='op'>=</span> <span class='va'>family</span>, phone <span class='op'>=</span> <span class='va'>phone</span>, address <span class='op'>=</span> <span class='va'>address</span><span class='op'>)</span>
<span class='op'>}</span>
</pre><p></div></p>
<p>Notice that former calls to <code>Customer</code> in the code base, which modelled
the ordering pizza process for diners, are not impacted by the added
input arguments. For example, the call of previous diner works well.<div class="r"></p><pre><span class='va'>customer</span> <span class='op'>&lt;-</span> <span class='fu'>Customer</span><span class='op'>(</span>given <span class='op'>=</span> <span class='st'>"Bilbo"</span>, family <span class='op'>=</span> <span class='st'>"Baggins"</span><span class='op'>)</span>
</pre><p></div></p>
<p>The <strong>Value Object</strong> ascribes NA values for the phone number and address
of diners, that is customers in the restaurant.</p>
<p>The second subtle quality regards tests. With <strong>Value Object</strong> you can
replace Without a <strong>Value Object</strong>, your test expectations capture only
the available knowledge at the moment of writing the test. For example,
a test that validates the structure of a returning data from a function
call,<div class="r"></p><pre><span class='fu'>test_that</span><span class='op'>(</span><span class='st'>'calling Order$get_customer_info() returns the desired results'</span>, <span class='op'>{</span>
    <span class='fu'>expect_setequal</span><span class='op'>(</span>
        <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>Order</span><span class='op'>$</span><span class='fu'>get_customer_info</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>,
        <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"given"</span>, <span class='st'>"family"</span>, <span class='st'>"phone"</span>, <span class='st'>"address"</span><span class='op'>)</span>
    <span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
</pre><p></div></p>
<p>can instead be written against the <code>Customer</code> <strong>Value Object</strong>,<div class="r"></p><pre><span class='fu'>test_that</span><span class='op'>(</span><span class='st'>'calling Order$get_customer_info() returns the desired results'</span>, <span class='op'>{</span>
    <span class='fu'>expect_setequal</span><span class='op'>(</span>
        <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>Order</span><span class='op'>$</span><span class='fu'>get_customer_info</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>,
        <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='fu'>Customer</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
    <span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
</pre><p></div></p>
<p>By avoiding hard coding of column names, your tests evolve along side
the code base.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>How Should I use Value Objects in my design?</h3>

<ol>
<li><p>Querying an <strong>Entity</strong> , that is by using its public query methods,
should return a <strong>Value Object</strong>.</p></li>
<li><p>Calling <strong>Value Object</strong> can happen inside another <strong>Value Object</strong>.</p></li>
<li><p>Reusing <strong>Value Object</strong> in tests, such as unit-tests and
integration-tests, is useful when the test aims to capture the
structure of a returning object.</p></li>
</ol>

<p>The following example shows how to embed the <code>Customer</code> <strong>Value Object</strong>
in the pizza <code>Order</code> Entity<div class="r"></p><pre><span class='va'>Order</span><span class='op'>$</span><span class='fu'>set</span><span class='op'>(</span><span class='st'>"public"</span>, <span class='st'>"set_customer_info"</span>, <span class='kw'>function</span><span class='op'>(</span>
  <span class='va'>given</span> <span class='op'>=</span> <span class='cn'>NA_character_</span>, <span class='va'>family</span> <span class='op'>=</span> <span class='cn'>NA_character_</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>self</span><span class='op'>$</span><span class='va'>customer</span> <span class='op'>&lt;-</span> <span class='fu'>Customer</span><span class='op'>(</span><span class='va'>given</span>, <span class='va'>family</span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>self</span><span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>  
</pre><p></div></p>
<p>Then we can test the result of a call for this function<div class="r"></p><pre><span class='fu'>test_that</span><span class='op'>(</span><span class='st'>'calling Order$set_customer_info returns the customer info'</span>, <span class='op'>{</span>
    <span class='fu'>expect_setequal</span><span class='op'>(</span>
        <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>Order</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>id <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>$</span><span class='fu'>set_customer_info</span><span class='op'>(</span><span class='st'>"Bilbo"</span><span class='op'>)</span><span class='op'>$</span><span class='va'>customer</span><span class='op'>)</span>,
        <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='fu'>Customer</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
    <span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
</pre><p></div></p>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other domain driven design patterns: 
<code><a href='add_domain_service.html'>add_domain_service</a>()</code>,
<code><a href='add_entity.html'>add_entity</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/harell'>Harel Lustiger</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '1cd55a1cf3bcf6d0b863fee2aedf4112',
    indexName: 'domain-driven-design',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


